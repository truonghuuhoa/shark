!function(_,t){var d={cache:function(){d.els={},d.vars={},d.vars.swatch_group_class=".fcms-was-swatches",d.vars.swatch_class=".fcms-was-swatch",d.vars.selected_class="fcms-was-swatch--selected",d.vars.disabled_class="fcms-was-swatch--disabled",d.vars.follow_class="fcms-was-swatch--follow",d.vars.variations_form_class=".variations_form",d.vars.attribute_labels_class=".variations .label",d.vars.chosen_attribute_class=".fcms-was-chosen-attribute",d.vars.no_selection='<span class="fcms-was-chosen-attribute__no-selection">'+fcms_was_vars.i18n.no_selection+"</span>",d.vars.attribute_selects_selector=".variations select",d.vars.change_image_links_class=".fcms-was-swatch--change-image",d.vars.widget_class=".fcms-was-swatches--widget ul",d.vars.widget_group_item=".fcms-was-swatch[data-group]",d.vars.window_size=_(window).width()},on_ready:function(){d.cache(),d.setup_swatches(),d.setup_change_image_links(),d.setup_fees(),d.setup_filter_groups()},setup_swatches:function(){_(t.body).on("click",d.vars.swatch_class,function(e){var a=_(this),s=a.closest(d.vars.variations_form_class),t=a.closest("table"),i=a.closest(d.vars.swatch_group_class).data("attribute"),c=a.data("attribute-value"),n=t.find('select[id="'+i.replace("attribute_","")+'"]');0===n.length&&a.closest(".bundled_item_cart_content")&&(s=a.closest(".bundled_item_cart_content"),n=t.find('select[id="'+i.replace("attribute_","")+"_"+s.data("bundled_item_id")+'"]'));var o=n.attr("name"),r=a.closest(".value").prev(".label").find(d.vars.chosen_attribute_class),l=(a.hasClass("fcms-was-swatch--colour-swatch")||a.hasClass("fcms-was-swatch--image-swatch"),d.get_current_values(s)),t=!1;if(a.hasClass(d.vars.follow_class))return!0;if(a.hasClass(d.vars.disabled_class)&&(d.reset_form(e,s),delete l[o],t=!0),n.trigger("focusin"),a.hasClass(d.vars.selected_class))return a.removeClass(d.vars.selected_class),d.select_value(n,""),void r.html(d.vars.no_selection);o=!1===_(d.vars.variations_form_class).data("product_variations"),r='[value="'+d.esc_double_quotes(c)+'"]';o||(r=".enabled"+r),0<n.find(r).length&&(d.deselect_swatch_group(s,i),a.addClass(d.vars.selected_class),d.select_value(n,c),t&&d.select_values(s,l))}),_(t).on("mouseenter mouseleave",d.vars.swatch_class,function(e){var a=_(this).closest(d.vars.swatch_group_class).next("div").find("select");a.length<=0||a.trigger("focusin")}),_(t).on("woocommerce_update_variation_values",d.vars.variations_form_class,function(){var i=_(this);i.find("select").each(function(e){var a=_(this),s=a.find("option"),a=a.data("attribute_name"),t=i.find(d.vars.swatch_group_class+'[data-attribute="'+d.esc_double_quotes(a)+'"]');t.find(d.vars.swatch_class).not(d.vars.swatch_class+"--dummy").addClass(d.vars.disabled_class),s.each(function(e,a){var s=_(a),a=s.val(),a=t.find('[data-attribute-value="'+d.esc_double_quotes(a)+'"]');s.hasClass("enabled")?a.removeClass(d.vars.disabled_class):a.removeClass(d.vars.selected_class)})})}),_(t).on("change",d.vars.attribute_selects_selector,function(){d.change_label(_(this))}),_(t.body).on("click",".reset_variations",function(e){var a=_(this).closest(d.vars.variations_form_class);d.reset_form(e,a)}),_(t).on("check_variations","form.variations_form",function(){var e=_(this).find("."+d.vars.disabled_class);e.length<=0||e.hasClass(d.vars.selected_class)&&(e.closest("tr").find(d.vars.chosen_attribute_class).html(d.vars.no_selection),e.removeClass(d.vars.selected_class))}),d.swatches_on_load()},select_values:function(c,n){var e=c.find("select");if(e.length<=0)return!1;e.each(function(e,a){var s,t=_(this),i=t.attr("name");void 0!==n[i]&&((s=t.find('option[value="'+d.esc_double_quotes(n[i])+'"]')).length<=0||s.hasClass("enabled")&&(d.select_value(t,n[i]),c.find(d.vars.swatch_class+'[data-attribute-value="'+d.esc_double_quotes(n[i])+'"]').click()))})},reset_form:function(e,a){e.preventDefault(),a.find(d.vars.attribute_selects_selector).find("option").prop("selected",!1).end().change().end().find(d.vars.swatch_class).removeClass(d.vars.selected_class).end().find(d.vars.attribute_labels_class+" "+d.vars.chosen_attribute_class).html(d.vars.no_selection).end().trigger("reset_data"),d.deselect_all_swatch_groups(a)},get_current_values:function(e){var s={},e=e.find("select");return!(e.length<=0)&&(e.each(function(){var e=_(this),a=e.attr("name"),e=e.val();e&&""!==e&&(s[a]=e)}),s)},deselect_swatch_group:function(e,a){e.find('[data-attribute="'+d.esc_double_quotes(a)+'"] '+d.vars.swatch_class).removeClass(d.vars.selected_class)},deselect_all_swatch_groups:function(e){e.find(d.vars.swatch_class).removeClass(d.vars.selected_class)},swatches_on_load:function(){var e=_(".variations select").find(":selected");e.length<=0||e.each(function(){var e=_(this).closest("select"),a=e.closest("form"),s=e.data("attribute_name"),t=_(this).val();d.change_label(e),s&&t&&(t=_('.fcms-was-swatches[data-attribute="'+s+'"] a.fcms-was-swatch[data-attribute-value="'+t+'"]'),d.deselect_swatch_group(a,s),t.addClass(d.vars.selected_class))})},select_value:function(e,a){e.val(a).change()},change_label:function(e){var a=e.val(),s=e.closest(".value"),t=s.find(d.vars.swatch_class+"[data-attribute-value="+JSON.stringify(a)+"]"),s=s.prev(".label").find(d.vars.chosen_attribute_class),e=0<t.length?t.data("attribute-value-name"):e.find('option[value="'+d.esc_double_quotes(a)+'"]').text();""!==a&&void 0!==e&&s.text(e)},setup_change_image_links:function(){_(t.body).on("click",d.vars.change_image_links_class,function(){var e=_(this),a=e.attr("href"),s=e.data("srcset"),t=e.data("sizes");return e.closest(".product").find("img:first").attr("src",a).attr("srcset",s).attr("sizes",t),!1})},esc_double_quotes:function(e){return String(e).replace(/"/g,'\\"')},setup_fees:function(){_(t.body).on("change",'input[name="variation_id"]',function(){var i,e,c,n,o,a=_(this);""!==a.val()&&((e=a.closest("form")).length<=0||(i=d.get_selected_fee_value(e))&&0!==i.default&&((a=e.find(".woocommerce-variation-price").find(".amount")).length<=0||(e=e.find(".woocommerce-price-suffix"),c=0<e.length&&d.get_suffix_map(e),o=n=0,a.each(function(e,a){var s=_(a);0<s.closest(".woocommerce-price-suffix").length?(t=c[n],o=i[t],n++):o=i.default;var a=accounting.unformat(s.text(),fcms_was_vars.currency.format_decimal_sep)+o,t=new RegExp("\\d{1,3}("+fcms_was_vars.currency.format_thousand_sep+"\\d{3})*(\\"+fcms_was_vars.currency.format_decimal_sep+"\\d+)?","gm"),a=accounting.formatMoney(a,{symbol:"",decimal:fcms_was_vars.currency.format_decimal_sep,thousand:fcms_was_vars.currency.format_thousand_sep,precision:fcms_was_vars.currency.format_num_decimals,format:""});s.html(s.html().toString().replace(t,a))}))))})},get_suffix_map:function(e){var s=[],a=fcms_was_vars.currency.price_display_suffix.split("{");return _.each(a,function(e,a){-1!==a.indexOf("price_including_tax")?s.push("price_including_tax"):-1!==a.indexOf("price_excluding_tax")&&s.push("price_excluding_tax")}),s},setup_filter_groups:function(){_(d.vars.widget_group_item).length<=0||_(d.vars.widget_group_item).each(function(){var e,a,s;""!==_(this).data("group")&&(e=!1,a="fcms-was-group-"+_(this).data("group").toLowerCase().replace(" ","-"),0===_("li.fcms-was-swatches__group."+a).length&&((e=t.createElement("li")).classList="fcms-was-swatches__group "+a,(s=t.createElement("div")).classList="fcms-was-swatches__group-label",s.innerHTML=_(this).data("group"),e.appendChild(s)),!1!==e&&_(d.vars.widget_class).append(e),_(this).parent().remove(),_("li.fcms-was-swatches__group."+a).append(_(this)))})},get_selected_fee_value:function(e){var a=e.find(".fcms-was-fees");if(a.length<=0)return!1;var s={default:0,price_including_tax:0,price_excluding_tax:0},t=JSON.parse(a.text()),e=d.get_attributes_from_form(e);return _.each(e,function(e,a){void 0!==t[e]&&void 0!==t[e][a]&&(s={default:s.default+t[e][a].default,price_including_tax:s.price_including_tax+t[e][a].price_including_tax,price_excluding_tax:s.price_excluding_tax+t[e][a].price_excluding_tax})}),s},get_attributes_from_form:function(e){var t={},e=e.serializeArray();return e.length<=0||_.each(e,function(e,a){var s;""!==a.value&&a.name.startsWith("attribute_")&&(s=a.name.replace("attribute_",""),t[s]=a.value)}),t},debounce:function(t,i,c){var n;return function(){var e=this,a=arguments,s=c&&!n;clearTimeout(n),n=setTimeout(function(){n=null,c||t.apply(e,a)},i),s&&t.apply(e,a)}}},i={on_ready:function(){_(".fcms-was-accordion.product").length&&_(".fcms-was-accordion.product").find(".fcms-was-swatches").length&&(i.cache(),i.setup_accordion_html(),i.click_handler());var e=d.debounce(i.reset_accordion_height,250);_(window).resize(e)},cache:function(){i.els={},i.els.$product=_(".fcms-was-accordion.product"),i.els.$table=i.els.$product.find("table.variations"),i.els.$trs=i.els.$table.find(">tbody>tr"),i.els.$td_labels=i.els.$table.find(">tbody>tr>.label")},setup_accordion_html:function(){i.els.$td_labels.each(function(){var e=_(this),a=e.closest("tr");0<a.find(".single_variation_wrap").length||0<e.find(".fcms-was-accordion__handle").length||(a.addClass("fcms-was-accordion__row"),e.append("<span class='fcms-was-accordion__handle'></span>"))})},click_handler:function(){i.els.$td_labels.click(function(){var e,a=_(this).parent(),s=(_(this).find(".fcms-was-accordion__handle"),_(this).siblings(".value"));a.hasClass("fcms-was-accordion--active")?(a.removeClass("fcms-was-accordion--active"),s.css("overflow","hidden"),s.height(0),window.setTimeout(function(){s.css("overflow","visible"),s.hide()},150)):(e=i.get_hidden_elements_height(s),s.show(),s.height(e),a.addClass("fcms-was-accordion--active"),s.css("overflow","hidden"),window.setTimeout(function(){s.css("overflow","visible")},150))})},reset_accordion_height:function(){var e=_(".fcms-was-accordion--active");e.length<=0||e.each(function(e,a){var s=_(a).find("td.value"),a=s.children(),t=0;0<a.length&&a.each(function(e,a){_(a).is(":visible")&&(t+=_(a).outerHeight(!0))}),s.height(t)})},get_hidden_elements_height:function(e){e.height("auto").addClass("test");var a=e.height();return e.height(0),a},open_first_swatch:function(){var e=i.els.$trs&&i.els.$trs.first()&&i.els.$trs.first().find(".label");e&&e.trigger("click")}},l={on_ready:function(){_("ul.fcms-was-swatches.fcms-was-swatches--loop").not(".fcms-was-swatches--stacked").each(function(){var e=_(this);window.setTimeout(function(){l.handle_adaptive_for_single_ul(e)},1)}),_(t.body).on("click",".fcms-was-swatches__item--dummy",l.show_all_attributes);var e=d.debounce(l.on_window_resize,250);_(window).resize(e)},on_window_resize:function(){_(".fcms-was-swatches").each(function(){var e=_(this);l.handle_adaptive_for_single_ul(e)})},handle_adaptive_for_single_ul:function(e){var a,s,t,i,c,n,o,r=e.data("overflow");r&&"stacked"!==r&&(e.removeClass("fcms-was-swatches--loading"),e.css("height","auto"),"slider"===r?(s="fcms-was-swatches--slider-wrapper",(a=0<e.parent("."+s).length)||(e.wrap('<div class="'+s+'"></div>'),a=!0),t=e.parent().width(),s=(r=(i=e.find("li")).not(".fcms-was-swatches__label").first()).outerWidth(!0),r=parseInt(r.css("margin-right")),r=(t=Math.floor(t/s))*s-r,!(i=t<i.length)&&a&&e.unwrap(),e.hasClass("flickity-enabled")?i?(e.width(r),e.flickity("resize")):(e.flickity("destroy"),e.width("")):i?(e.width(r),e.flickity({resize:!1,percentPosition:!1,selectedAttraction:.075,friction:.42,pageDots:!1,cellAlign:"left",groupCells:!0,contain:!0,rightToLeft:!1,arrowShape:{x0:20,x1:55,y1:35,x2:60,y2:30,x3:30}})):e.width("")):(c=e.width(),o=n=0,e.find(".fcms-was-swatches__item").each(function(){(n+=_(this).outerWidth(!0))<c&&o++}),l.adapt(e,o)))},get_inner_elements_total_width:function(e){var a=0;return jQuery(e).find(">li").each(function(){jQuery(this).is(":visible")&&(a+=jQuery(this).outerWidth(!0))}),a},adapt:function(e,a){var s=e.find(">li").not(".fcms-was-swatches__item--dummy");s.removeClass("fcms-was-swatches__item--hidden");a=!(s.length<=a)&&s.slice(a-1);a?(a.addClass("fcms-was-swatches__item--hidden"),e.find(">.fcms-was-swatches__item--dummy a").text("+"+a.length),e.find(">.fcms-was-swatches__item--dummy").removeClass("fcms-was-swatches__item--hidden"),e.addClass("fcms-was-swatches--single-line")):(e.find(">.fcms-was-swatches__item--dummy").addClass("fcms-was-swatches__item--hidden"),e.removeClass("fcms-was-swatches--single-line"))},show_all_attributes:function(e){e.preventDefault();e=_(this).parent();e.hasClass("fcms-was-swatches--loop")?window.location.href=_(this).find("a").attr("href"):(e.find(".fcms-was-swatches__item--hidden").removeClass("fcms-was-swatches__item--hidden"),_(this).addClass("fcms-was-swatches__item--hidden"),e.removeClass("fcms-was-swatches--single-line"),e.data("overflow","stacked"),e.find(".fcms-was-swatches__item--dummy").hide(),_(t).trigger("fcms_was_reset_accordion_height"))}},n={cache:function(){n.cache.vars={tooltip:".fcms-was-tooltip",arrow:".fcms-was-tooltip__arrow",anchor:".fcms-was-swatches--tooltips .fcms-was-swatch:not(.fcms-was-swatch--dummy)"}},on_ready:function(){n.cache(),0===_(".fcms-was-tooltip").length&&(_("body").append('<div class="fcms-was-tooltip"><div class="fcms-was-tooltip__inner_wrap"></div><div class="fcms-was-tooltip__arrow"></div></div>'),_(".fcms-was-tooltip").hide()),_(window).resize(n.on_resize);var e=d.debounce(n.handle_mouseenter,200),a=d.debounce(n.handle_mouseleave,200);fcms_was_vars.is_mobile?(n.mobile_click_handler(),_(window).scroll(n.handle_mouseleave),_(window).on("resize_threshold",n.handle_mouseleave)):(_(t.body).on("mouseenter",n.cache.vars.anchor,e),_(t.body).on("mouseleave",n.cache.vars.anchor,a),_(window).scroll(n.handle_mouseleave).resize(n.handle_mouseleave))},handle_mouseenter:function(){var e=_(this),a=e.find(".fcms-was-swatch__text").html(),s=_(n.cache.vars.tooltip);s.find(".fcms-was-tooltip__inner_wrap").html(a),s.css({left:"",right:""});var t=s.find(n.cache.vars.arrow),i=s.outerWidth(!0),c=e.get(0).getBoundingClientRect(),a=c.left+c.width/2,e=(e=a-i/2)<0?0:e;_(window).width()<i+e?s.css({left:"",right:0}):s.css({left:e,right:""});e=s.outerHeight(!0),e=c.top-e;s.css("top",e).show().addClass("fcms-was-tooltip--animate-opacity fcms-was-tooltip--animate-top fcms-was-tooltip--active");s=s.offset();t.css("left",a-s.left)},handle_mouseleave:function(){_(n.cache.vars.tooltip).removeClass("fcms-was-tooltip--animate-top fcms-was-tooltip--animate-opacity fcms-was-tooltip--active")},mobile_click_handler:function(){var c=t.querySelectorAll(n.cache.vars.anchor);t.addEventListener("click",function(e){var a,s=e.composedPath(),t=!1;for(a in c){var i=c[a];if(s.includes(i)){t=i;break}}t?n.handle_mouseenter.call(t):n.handle_mouseleave()})},on_resize:function(){var e=d.vars.window_size,a=_(window).width(),e=e-a;10<Math.abs(e)&&(d.vars.window_size=a,_(window).trigger("resize_threshold"))}};_(t).ready(d.on_ready),_(t).ready(i.on_ready),_(t).ready(n.on_ready),_(t).ready(l.on_ready),_(t).on("fcms_was_reset_accordion_height",i.reset_accordion_height)}(jQuery,document);